<html>
    <head>
        <title>Tornado WebSockets</title>
        <link type="image/x-icon" rel="short icon" href="http://www.bing.com/s/a/bing_p.ico">
        <link rel="stylesheet" href="/css/style.css"/>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.13/angular.min.js"></script>
        <script src="/js/script.ng.js" type="text/javascript"></script>
        <!-- Note: {{ ... }} Angular elements have ! added to allow Tornado to ignore them in rendering the page. -->
    </head>
    <body ng-app="wsApp" ng-controller="wsController">
        <h1>WebSocket Test</h1>
        <div id="message-container" class="messages">
            <h2 class="container-title">Messages:</h2>
            <div class="container">
                <div><strong>Message Received:</strong></div>
                <textarea readonly rows="4" cols="50" id="message-receive"></textarea>
            </div>
            <div class="container">
                <div><strong>Message to Send:</strong></div>
                <input type="text" ng-model="message.input_text" id="message-send" maxlength="50" size="50" value="{{! message_send.text }}">
                <input type="button" ng-click="message_send();" value="Send">
                <ul class="controls mode-controls">
                    <li>
                        <input type="radio" name="mode" class="radio" id="mode-echo" checked checked="checked" ng-click="mode_change('echo')"></input>
                        <label for="mode-echo">Echo</label>
                    </li>
                    <li>
                        <input type="radio" name="mode" class="radio" id="mode-broadcast" ng-click="mode_change('broadcast')"></input>
                        <label for="mode-broadcast">Broadcast</label>
                    </li>
                </ul>
            </div>
            <div class="container">
                <strong>Status from Server: </strong><span ng-model="status.output" id="status">{{! status.output }}</span>
            </div>
        </div>
        <div id="action-container">
            <h2 class="container-title">Actions</h2>
            <div class="container">
                <div><strong>Predefined actions to trigger on the client side:</strong></div>
                <ul class="controls action-controls">
                    <li>
                        <input type="button" id="action_one" ng-click="action_trigger_send('trigger');" value="Trigger action">
                    </li>
                </ul>
                <p>Predefined client-side JS functions can be triggered.</p>
            </div>
            <div class="container">
                <div><strong>HTML code to broadcast:</strong></div>
                <textarea rows="4" cols="50" ng-model="action_html.input_text" id="action-html-send">{{! action_html.input_text }}</textarea>
                <input type="button" ng-click="action_html_send();" value="Send HTML">
                <p>This HTML will be broadcasted to all clients and be rendered in on their page.</p>
                <div ng-bind-html="action_html.output">{{! action_html.output }}</div>
            </div>
            <div class="container">
                <div><strong>Parameter based packets:</strong></div>
                <textarea rows="4" cols="50" ng-model="action_json.input_text" id="action-json-send">{{! action_json.input_text }}</textarea>
                <input type="button" ng-click="action_json_send();" value="Send JSON">
                <p>This JSON will be broadcasted to clients to be processed and rendered in a template.</p>
                <div ng-bind-html="action_json.output">{{! action_json.output }}</div>
            </div>
        </div>
        <div id="code-container">
            <h2 class="container-title">Codez:</h2>
            <div class="container">
                <ul>
                    <li>
                        <a href="/js/script.js">script.js</a>
                    </li>
                    <li>
                        <a href="/css/style.css">style.css</a>
                    </li>
                </ul>
            </div>
        </div>
    </body>
</html>
